# Спецификация требований к процессу аренды помещений

## 1. Глоссарий 

* _МП_ - мобильное приложение для управления умным домом
* _АП_ - Административная панель, интерфейс для управления и настройки web и мобильного приложения
* _МОП_ - место общего пользования
* _УК_ - Управляющая Компания

## 2. Описание проекта 

### Цель: 
Подготовить интерфейс для аренды МОП через МП и управления МОП через АП

### Бизнес-контекст 
Для жителей Жилищного Комплекса доступна возможность аренды МОП на определенное время. Это может быть как зона BBQ, беседка или "переговорка". За каждым МОП закреплен представтель УК, который отвечает за его состояние. Кроме УК предоставлять МОП для аренды могут подрядчики. Сама аренда может быть платной и бесплатной. 

### Классы пользователей 
* **Супер администратор** - разработчик МП и АП.
* **Администратор** - пользователь АП, который устанавливается супер администратором. Он может создать сущность МОП в АП и управлять ей. 
* **Владелец МОП** - получатель платежей. Клиент УК, который получает денежные средства от аренды МОП. Он выбирает подрядчика, который получит возможность создать карточку МОП.
* **Арендодатель** - подрядчик, выбранный Владельцем МОП. Он создает карточку МОП, сдает МОП в платную или бесплатную аренду и несет ответственность за состояние МОП.
* **Арендатор** - пользователь МП, который арендует МОП.
* **Диспетчер** - сотрудник УК, назначенный администартором для оперативного решения инцидентов. 

## 3. Требования

### Пользовательские требования

* **Арендатор** должен иметь возможность забронировать МОП из Главного меню МБ
* **Арендатор** в разделе должен будет видеть МОП, доступные для бронирования
* **Арендатор** должен будет иметь возможность выбрать форму визуализации МОП:
* Визуализация "Список" (В разделе МОП отражаются списком их названий. Например, "Беседка", "Сцена" и т.д.)
* Визуализация "Блоки" (В разделе МОП отражаются блоками с фото объекта и его названием)
* **Арендатор** должен выбрать дату бронирования на отдельном экране
* Экран должен называться "Выбор даты бронирования"
* Под заголовком экрана должно быть отражено название МОП
* **Арендатор** должен видеть доступные для бронирования дни и часы
* **Арендатор** может забронировать дату за 2 недели
* **Арендатор** должен видеть доступные для бронирования дни и часы в календаре
* Доступность для бронирования должна отображаться визуально (Например, чем меньше доступно для бронирования часов, тем темнее отображается день)
* Те дни, в которых часы бронирования закончились, должны быть заблокированы для нажатия пользователем
* **Арендатор** должен выбрать часы бронирования, нажав на день в календаре
* Для выбора доступны интервалы длиною, который указал **администратор** при создании "карточки МОП".
* Интервалы отображаются списком
* Если бронирование платное, то в строке выбора времени появляется стоимость бронирования часа
* **Арендатор** должен забронировать МОП максимум на 1 сутки
* При нажатии **арендатором** на строку времени, под списком появляется кнопка "Подтвердить"
* Если бронирование платное, то появляется кнопка "Подтвердить оплату *** рублей"
* Информация о бронировании дублируется на почту **арендатора**
* Перед подтверждением аренды МОП, если у **арендатора** не привязана к аккаунту почта, то появится дисклеймер о необходимости закрепить почтовый адрес к аккаунту МП.
* После подтверждении оплаты должен открыться браузер, через который осуществляется транзакция
* **Арендатор** должен видеть, что МОП им забронирован
* **Арендатор** должен видеть в разделе "Пространства" надпись "Забронирован"
* Напоминания о бронировании появляются за 1 день, 1 час до начала бронирования в виде пуш-уведомлений.
* **Арендатор** должен иметь возможность отменить бронирование но не позже чем за 12 часов до начала времени бронирования
* В момент начала бронирования приходит пуш-уведомление.
* **Арендатор** может отключить нотификацию из "Настройки" на экране "Пространства"
* **Арендатор** может установить интервал нотификации из "Настройки" на экране "Пространства"
* По окончании бронирования, **арендатор** должен отсканировать QR-код. После сканирования **арендатор** должен сфотографировать МОП. Эту фотографию должен обработать **диспетчер**, чтобы убедиться, что МОП не испорчен.
* **Администратор** должен будет ввести через АП объекты МОП
* **Администратор** должен указать название МОП
* **Администратор** должен указать платная или бесплатная будет бронирование
* **Администратор** должен добавить качественные фотографии МОП (эти фотографии будут отражаться в мобильном приложении Мажордом)
* **Администратор** должен указать, нужен ли по окончании бронирования фотоотчет
* **Диспетчер** должен знать статусы бронирования МОП
* **Диспетчер** должен обрабатывать фотографии, полученные после окончания бронирования арендатором МОП
* **Диспетчер** должен обработать запрос на возврат денежных средств.

### User Stories

1. Я, как арендатор, хочу знать, какие объекты для бронирования (букинга) мне доступны, чтобы я мог получить нужную мне информацию о них без лишних переходов на сайты и звонков. 
2. Я, как арендатор, хочу иметь возможность бронировать объекты заранее, чтобы быть уверенным в том, что к выбранному времени объект был свободен.
3. Я, как арендатор, хочу оплачивать бронирование (букинга) из мобильного приложения Мажордом, чтобы не тратить большое количество времени на этот процесс.
4. Я, как арендатор, хочу иметь возможность отменять бронирования, чтобы я мог получить обратно денежные средства.
5. Я, как арендатор, хочу настраивать уведомления о предстоящем бронировании, чтобы они не казались мне навязчивыми.
6. Я, как администратор, хочу иметь возможность скрывать объект для бронирования из мобильного приложения, чтобы он был не доступен для арендаторов.
7. Я, как администратор, хочу получать сведения об оплатах, чтобы сформировать отчет для налоговой.

## 4. Низкоуровневые макеты

### Административаня панель

#### Форма создания МОП
**Цель:** создание карточки "МОП" администратором/подрядчиком в справочнике для отражения в мобильном приложении Мажордом.
<img width="931" height="661" alt="image" src="https://github.com/user-attachments/assets/9a4692af-bc72-4651-a910-080cc54c80d3" />
**Логика работы:**
1. При нажатии на кнопку "Добавить" должен открыться экран создания/редактирования карточки МОП. 
2. При выборе "Города" из выпадающего списка должна произойти фильтрация по городу. При выборе "ЖК" из выпадающего списка должна произойти фильтрация по ЖК. При выборе "Дома" из выпадающего списка должна произойти фильтрация по дому.
3. При нажатии на "Список аренды" в строке МОП должен произойти переход на экран "Название МОП. Список записей".
4. При нажатии на кнопку "Удалить" в строке МОП, строка должна исчезнуть в "Справочнике МОП" и в МП.

#### Форма настройки МОП
**Цель:** выбор настроек администратором/подрядчиком при создании карточки "МОП".
<img width="1081" height="741" alt="image" src="https://github.com/user-attachments/assets/ed929a5f-487a-4639-8cae-741082c77b6d" />
**Логика работы:**
1. Вносить изменения в "Карточку МОП" может только Администратор УК и Подрядчик, который назначен "Ответственным"
2. "Ответственный" выбирается из компании-подрядчика. 
3. Фото объекта должно быть загружено в формате JPEG или PNG. 
4. МОП может быть привязан как к ЖК, так и к дому. Выбор города, улицы, ЖК и дома должен происходить из выпадающего списка. Также должна быть реализована возможность добавления дополнительного адреса. Количество адресов неограниченно.
5. "Компания" и "Ответственный" арендодателя должны быть выбраны из выпадающего списка.
6. Время работы МОП вносится вручную.
7. В "Днях недели" выбираются дни, в которые МОП доступен для аренды. 
8. При выборе временного интервала, администратор должен выбрать шаг минимального интервала времени аренды (15 минут (например, для массажных комнат), 30 минут, 1 час, 2 часа, 3 часа, 4 часа (например, для номеров в гостинице)). Также должно быть предусмотрено добавление дополнительного временного интервала (например, МОП закрывается на технический перерыв).
9. Если выбран чек-бокс "Платная аренда", то карточка "МОП" не будет создана, пока поле ввода стоимости аренды не будет заполнено.
10. Если выбран чек-бокс "Скрыть МОП в мобильном приложении", то для пользователей МОП в МП будет скрыт.
11. В подразделе "Выбор интервала аренды" администратор указывает ограничения в аренде для жильцов. Например, "один жилец не может арендовать МОП на 8 часов"; "один жилец может арендовать МОП только 1 раз в неделю". Необязателен для заполнения. 
12. В форме создания карточки МОП должна быть реализована возможность прикрепить дополнительный адрес к МОП.

#### Список МОП 
**Цель:** просмотр истории аренды администратором/подрядчиком для конкретного МОП. 
<img width="931" height="661" alt="image" src="https://github.com/user-attachments/assets/ade383ad-d625-4195-b301-43b92eb60918" />
**Логика работы:**
1. Записи об аренде можно будет отфильтровать по "Имени" и "Телефону".
2. Даты в "Календаре" должны быть кликабельны, если в этот день есть аренда. 
3. При нажатии на кнопку "Отменить" у арендатора отменяется запись. Пользователю должно прийти оповещение об отмене. Если отменяется платная аренда, то пользователю приходит оповещение об отмене и происходит возврат денежных средств.

### Аренда МОП в МП

#### Список МОП для аренды 
**Цель:** отразить пользователям МП все доступные МОП для аренды.
<img width="691" height="451" alt="image" src="https://github.com/user-attachments/assets/d7ad6716-d92e-4b11-827a-7d9b4170b476" />
**Логика работы:**
1. При нажатии на "Название МОП" должен открыться экран "Выбор даты".
2. При нажатии на "Способ отображения" должен появиться попап с выбором отображения.
3. При нажатии "Отмена букинга" должен появиться попап с предупреждением: "Вы точно хотите отменить аренду?"
4. Если при доме отсутствуют МОП или они скрыты администратором, то при переходе в "Список МОП" должен появиться пустой экран с сообщением: "В вашем доме данная услуга недоступна". Также должна быть кнопка возврата на предыдущий экран.

#### Выбор даты и времени аренды
<img width="731" height="974" alt="image" src="https://github.com/user-attachments/assets/7ad24cd7-aece-49c4-b47c-abc9368ba791" />
<img width="731" height="974" alt="image" src="https://github.com/user-attachments/assets/4ab22ac9-ee3b-4d4a-bab4-8e883df2facc" />
**Логика работы:**
1. Календарь представляет из себя страницу обычного календаря. День в календаре интерактивен. Чем больше занято временных слотов, тем в более темных цветах отражается день. Если все временные слоты закрыты, то "день" не активен. 
2. Часы должны отражаться списком чек-боксов. Если в выбранном интервале есть разрывы, то подтвердить шаринг нельзя. 
3. Если услуга аренды платная, то при появлении попапа "Подтвердить/оплатить" должна появиться сумма оплаты. Если услуга бесплатная, то должна появиться просто кнопка "Подтвердить" и "Отменить".
4. Если услуга аренды платная, по при нажатии на кнопку "Оплатить", должен произойти переход на страницу оплаты в браузере. 
5. После подтверждения/оплаты должен появиться попап, уведомляющий о завершении процесса. В попапе должны быть отражены чек-боксы "Уведомлять о начале шаринга за 1 день" и "Уведомлять об окончании за шаринга за 15 минут". 













